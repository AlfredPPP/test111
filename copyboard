import subprocess
import pkg_resources

# 获取所有已安装包的信息
installed_packages = pkg_resources.working_set
packages = [package.project_name for package in installed_packages]

# 逐个升级每个包
for package in packages:
    subprocess.run([sys.executable, '-m', 'pip', 'install', '--upgrade', package])